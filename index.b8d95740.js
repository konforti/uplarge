let e,t,s,a,n,o,d,r,l,i,u,c,p;function v(v){if(!v)return TypeError("The file is missing");r=(d=v).size,function v(m=!1){var L,h;let g,f;(i=l+parseInt(a))>r&&(i=r);let E=d.slice(l,i);!m&&o++,(L=l,h=i-1,(g=new FormData).append("file",E),g.append("upload_preset",s),g.append("cloud_name",e),g.append("public_id",t),f=new XMLHttpRequest,new Promise(function(t,s){f.onload=()=>{4===f.readyState&&(2===parseInt(f.status/100)?t(f):s({status:f.status,statusText:f.statusText}));// Only run if the request is complete (4 == Done)
},f.open("POST",`https://api.cloudinary.com/v1_1/${e}/auto/upload`),f.timeout=36e5,f.setRequestHeader("X-Unique-Upload-Id",n),f.setRequestHeader("Content-Range",`bytes ${L}-${h}/${r}`),f.upload.onloadstart=function(){// Fired when a request has started to load data
},f.onloadend=function(){// Fired when a request has been completed, whether successfully (after load) or unsuccessfully (after abort or error)
},f.upload.onabort=function(){// Fired when a request has been aborted, for example, because the program called XMLHttpRequest.abort().
},f.upload.onprogress=function(e){// Fired periodically when a request receives more data
let t=Math.max(e.total,r),s=(o-1)*a+e.loaded;p.dispatchEvent(new CustomEvent("progress",{detail:{percent:s/t*100}}))},f.upload.ontimeout=function(){// Fired when progress is terminated due to preset time expiring
},f.upload.onerror=function(e){p.dispatchEvent(new CustomEvent("error",{detail:{status:f.status,message:e.target.responseText}})),s({status:f.status,statusText:f.statusText})},f.send(g)})).then(e=>{2===parseInt(e.status/100)?(c=0,i<r?(l=i,v()):p.dispatchEvent(new CustomEvent("success",{detail:{response:JSON.parse(e.response)}}))):c++<=u&&v(!0)}).catch(e=>{console.error(e)})}()}let m=document.getElementById("picker"),L=document.getElementById("clear"),h=document.getElementById("status"),g=document.getElementById("progress"),f=document.getElementById("url"),E=document.querySelector(".container"),w=document.querySelector(".progress-tools"),y=document.querySelector(".upload-tools"),T=document.querySelector(".finish-tools");function I(d){var r;let m=new URLSearchParams(window.location.search),L=(r={cloudName:m.get("cloud_name")||"demo",uploadPreset:m.get("upload_preset")||"unsigned"},n=+new Date,t=r&&r.publicId||n,e=r&&r.cloudName||"demo",s=r&&r.uploadPreset||"unsigned",a=6e6,l=0,i=0,o=0,u=3,c=0,{on:p=new EventTarget,uploadFile:v});L.uploadFile(d),L.on.addEventListener("progress",e=>{g.value=Math.round(e.detail.percent),h.innerHTML=`${Math.round(e.detail.percent)}%`}),L.on.addEventListener("success",e=>{let t=e.detail.response,s=t.playback_url;"video"!==t.resource_type&&(s=t.secure_url),f.innerHTML=s,f.href=s,w.classList.add("hide"),w.classList.remove("show"),y.classList.add("hide"),y.classList.remove("show"),T.classList.add("show"),T.classList.remove("hide")}),L.on.addEventListener("error",e=>{errEl.innerHTML=`Error during the upload: [${e.detail.status}] ${e.detail.message}.`})}function M(){w.classList.add("show"),w.classList.remove("hide"),y.classList.add("hide"),y.classList.remove("show"),T.classList.add("hide"),T.classList.remove("show")}L.addEventListener("click",e=>{m.value&&(m.disabled=null,g.value=0,h.innerHTML="0%",f.innerHTML=null,f.href=null,w.classList.add("hide"),w.classList.remove("show"),y.classList.add("show"),y.classList.remove("hide"),T.classList.add("hide"),T.classList.remove("show"))}),m.addEventListener("input",e=>{I(m.files[0]),m.disabled="disabled",M()}),E.addEventListener("dragenter",e=>{m.value||(e.preventDefault(),e.stopPropagation(),E.classList.add("active"))},!1),E.addEventListener("dragleave",e=>{m.value||(e.preventDefault(),e.stopPropagation(),E.classList.remove("active"))},!1),E.addEventListener("dragover",e=>{m.value||(e.preventDefault(),e.stopPropagation(),E.classList.add("active"))},!1),E.addEventListener("drop",e=>{m.value||(e.preventDefault(),e.stopPropagation(),E.classList.remove("active"),I(e.dataTransfer.files[0]),M())},!1);//# sourceMappingURL=index.b8d95740.js.map

//# sourceMappingURL=index.b8d95740.js.map
