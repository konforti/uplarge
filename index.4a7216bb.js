let e,t,s,a,n,o,d,r,l,i,u,c,p,v;function m(m){if(!m)return TypeError("The file is missing");r=(d=m).size,function m(L=!1){var h,g;let f,E;(i=l+parseInt(a))>r&&(i=r);let w=d.slice(l,i);!L&&o++,(h=l,g=i-1,(f=new FormData).append("file",w),f.append("upload_preset",s),f.append("cloud_name",e),f.append("public_id",t),E=new XMLHttpRequest,new Promise(function(t,s){E.onload=()=>{4===E.readyState&&(2===parseInt(E.status/100)?t(E):s({status:E.status,statusText:E.statusText}));// Only run if the request is complete (4 == Done)
},E.open("POST",`https://api.cloudinary.com/v1_1/${e}/auto/upload`),E.timeout=36e5,E.setRequestHeader("X-Unique-Upload-Id",n),E.setRequestHeader("Content-Range",`bytes ${h}-${g}/${r}`),E.upload.onloadstart=function(){// Fired when a request has started to load data
},E.onloadend=function(){// Fired when a request has been completed, whether successfully (after load) or unsuccessfully (after abort or error)
},E.upload.onabort=function(){// Fired when a request has been aborted, for example, because the program called XMLHttpRequest.abort().
},E.upload.onprogress=function(e){// Fired periodically when a request receives more data
let t=Math.max(e.total,r);u=Math.min(u=Math.max(u=((o-1)*a+e.loaded)/t*100,1),99),v.dispatchEvent(new CustomEvent("progress",{detail:{percent:u}}))},E.upload.ontimeout=function(){// Fired when progress is terminated due to preset time expiring
},E.upload.onerror=function(e){v.dispatchEvent(new CustomEvent("error",{detail:{status:E.status,message:e.target.responseText}})),s({status:E.status,statusText:E.statusText})},E.send(f)})).then(e=>{2===parseInt(e.status/100)?(p=0,i<r?(l=i,m()):(u=100,v.dispatchEvent(new CustomEvent("success",{detail:{response:JSON.parse(e.response)}})))):p++<=c&&(console.info(`${p} retry of chunk ${o}`),m(!0))}).catch(e=>{console.error(e)})}()}let L=document.getElementById("picker"),h=document.getElementById("clear"),g=document.getElementById("status"),f=document.getElementById("progress"),E=document.getElementById("url"),w=document.querySelector(".container"),y=document.querySelector(".progress-tools"),T=document.querySelector(".upload-tools"),M=document.querySelector(".finish-tools");function I(d){var r;let u=new URLSearchParams(window.location.search),L=(r={cloudName:u.get("cloud_name")||"demo",uploadPreset:u.get("upload_preset")||"unsigned"},n=+new Date,t=r&&r.publicId||n,e=r&&r.cloudName||"demo",s=r&&r.uploadPreset||"unsigned",a=6e6,l=0,i=0,o=0,c=3,p=0,{on:v=new EventTarget,uploadFile:m});L.uploadFile(d),L.on.addEventListener("progress",e=>{f.value=Math.round(e.detail.percent),g.innerHTML=`${Math.round(e.detail.percent)}%`}),L.on.addEventListener("success",e=>{let t=e.detail.response,s=t.playback_url;"video"!==t.resource_type&&(s=t.secure_url),E.innerHTML=s,E.href=s,y.classList.add("hide"),y.classList.remove("show"),T.classList.add("hide"),T.classList.remove("show"),M.classList.add("show"),M.classList.remove("hide")}),L.on.addEventListener("error",e=>{errEl.innerHTML=`Error during the upload: [${e.detail.status}] ${e.detail.message}.`})}function P(){y.classList.add("show"),y.classList.remove("hide"),T.classList.add("hide"),T.classList.remove("show"),M.classList.add("hide"),M.classList.remove("show")}h.addEventListener("click",e=>{L.value&&(L.disabled=null,f.value=0,g.innerHTML="0%",E.innerHTML=null,E.href=null,y.classList.add("hide"),y.classList.remove("show"),T.classList.add("show"),T.classList.remove("hide"),M.classList.add("hide"),M.classList.remove("show"))}),L.addEventListener("input",e=>{I(L.files[0]),L.disabled="disabled",P()}),w.addEventListener("dragenter",e=>{L.value||(e.preventDefault(),e.stopPropagation(),w.classList.add("active"))},!1),w.addEventListener("dragleave",e=>{L.value||(e.preventDefault(),e.stopPropagation(),w.classList.remove("active"))},!1),w.addEventListener("dragover",e=>{L.value||(e.preventDefault(),e.stopPropagation(),w.classList.add("active"))},!1),w.addEventListener("drop",e=>{L.value||(e.preventDefault(),e.stopPropagation(),w.classList.remove("active"),I(e.dataTransfer.files[0]),P())},!1);//# sourceMappingURL=index.4a7216bb.js.map

//# sourceMappingURL=index.4a7216bb.js.map
